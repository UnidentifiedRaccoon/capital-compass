# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é –≤ Yandex Cloud

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–µ–ø–ª–æ–π

**Serverless Container —Å–æ–∑–¥–∞–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó** –≤—Ä—É—á–Ω—É—é, –∞ CI/CD —Ç–æ–ª—å–∫–æ **–æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–≤–∏–∑–∏–∏** —Å –Ω–æ–≤—ã–º –æ–±—Ä–∞–∑–æ–º.

## üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:

- `YC_SA_JSON` - –≤–µ—Å—å JSON —Ñ–∞–π–ª `sa.json` (–∏–∑ –Ω–µ–≥–æ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è `service_account_id` –∏ `private_key`)
- `YC_REGISTRY_ID` - ID Container Registry
- `YC_FOLDER_ID` - ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud
- `YC_CLOUD_ID` - ID –æ–±–ª–∞–∫–∞
- `YC_CONTAINER_NAME` - –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `WEBHOOK_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è webhook
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–π—Ç–µ Serverless Container –≤—Ä—É—á–Ω—É—é

```bash
# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
yc config set service-account-key sa.json
yc config set cloud-id YOUR_CLOUD_ID
yc config set folder-id YOUR_FOLDER_ID

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–û–î–ò–ù –†–ê–ó)
yc serverless container create \
  --name capital-compass \
  --description "Capital Compass AI Telegram Bot" \
  --folder-id YOUR_FOLDER_ID
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Settings` ‚Üí `Secrets and variables` ‚Üí `Actions` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞:

- `serverless.containers.invoker`
- `serverless.containers.editor`
- `container-registry.images.puller`

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç CI/CD

1. **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞** - GitHub Actions —Å–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑
2. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Registry** - –æ–±—Ä–∞–∑ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Yandex Container Registry
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≤–∏–∑–∏–∏** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ä–µ–≤–∏–∑–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –Ω–æ–≤—ã–º –æ–±—Ä–∞–∑–æ–º
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—É—é —Ä–µ–≤–∏–∑–∏—é

## ‚ùå –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Service account is not available"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `YC_SA_JSON` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `service_account_id`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### "Container already exists"

- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- CI/CD —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–≤–∏–∑–∏–∏

### "Password required"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `YC_SA_JSON` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π JSON —Ñ–∞–π–ª
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JSON –≤–∞–ª–∏–¥–Ω—ã–π

## üéâ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

–í–∞—à –±–æ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ URL, –∫–æ—Ç–æ—Ä—ã–π Yandex Cloud —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–ª—è Serverless Container.
